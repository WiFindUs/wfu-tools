WFU/RASPBIAN TOOLS
==================


SD CARD SETUP - FROM AN IMAGE
-----------------------------
1) Get yourself a 4gb SD card. The image is 2gb, though since not all SD cards are the same, you should have a 4GB card in case theres a size difference.  
2) Wipe the card.  
3) Flash the image.  
    3a) (optional)) Expand the second partition to fill the rest of the card.  
4) Ensure the GPS and Wireless dongles are connected to the Pi.  
5) Stick the card in an' turn 'er on.  


SD CARD SETUP - GOING IN DRY
----------------------------
Setting the unit up from scratch is not really that much harder.
1) Get an SD Card of whatever damn size you like - it just needs to be big enough to cater for Raspbian's many many packages upon installation (~2GB).  
2) Get an up-to date version of [Raspbian](http://downloads.raspberrypi.org/raspbian_latest)  
3) Install it on the SD card as per [the instructions](http://www.raspberrypi.org/documentation/installation/installing-images/README.md)  
    3a) (optional)) Update to the latest kernel by rolling your own from a linux box. Not a simple task, but the included `rebuild_rpi_kernel.sh`, along with [these instructions](http://elinux.org/RPi_Kernel_Compilation), should simplify matters. As long as you have all the necessary prerequisites in place my script will do all the hard work for you.  
4) Ensure the GPS and Wireless dongles are connected to the Pi.  
5) Once you've got it running, enter the following commands in the terminal:  
```Shell
    mkdir -p /home/pi/src  
	cd /home/pi/src  
	git clone git://github.com/WiFindUs/wfu-tools  
	sudo chmod 755 wfu-tools/*.sh  
	wfu-tools/wfu-initial-setup.sh  

```
6) Follow the instructions in the initial setup script.  


NETWORK ADDRESSES/IDENTITY
--------------------------
"Brain" node units are assigned a unique ID number between 1 and 254. This is used to determine their logical location on the network according to the following:  
- hostname: `wfu-brain-[num]`  
- mesh0 (mesh backbone interface): `192.168.2.[num]`  
- ap0 (public client interface): `192.168.0.1`  
- eth0 (wired, for testing only): `192.168.1.[max(100+num,254)]`  
A node's ID number may be changed using the `wfu-setup` command, discussed below.  


COMMAND LINE INTERFACE
----------------------
There are a few wfu-specific commands available on the command-line:  
- `wfu-update`: updates wfu-tools to the latest from GitHub.
- `wfu-setup`: set up a node with an ID #. Use `-h` for full help.
- `wfu-initial-setup`: re-runs the initial setup tool.
- `wfu-purge-system`: strips unnecessary apps and junk from Raspbian (is run as part of initial setup).
- `wfu-update-system`: installs/updates required system apps.
- `wfu-remove-all`: deletes files generated by `wfu-setup`. For debugging.
- `wfu-preimage-purge`: SD-Card cleaning operations to prepare it for imaging - run on the pi prior to the creating a new image.

